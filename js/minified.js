"use strict";let fullBag=document.querySelector(".full-bag"),body=document.querySelector("body"),bagHasClass=fullBag.classList.contains("show"),viewFullBagBtn=document.querySelector(".view-full-bag-btn"),returnToPage=document.querySelector(".return-to-main-page");function stopBodyScroll(){body.classList.toggle("stop1")}function hideNewsBar(){news.classList.toggle("hide")}function closeSideCart(){shoppingCart.classList.toggle("animate"),setTimeout(()=>{mainCart.classList.remove("open"),shoppingCart.classList.remove("animate")},700)}viewFullBagBtn.addEventListener("click",()=>{fullBag.classList.add("show"),stopBodyScroll(),hideNewsBar(),closeSideCart()}),returnToPage.addEventListener("click",()=>{fullBag.classList.remove("show"),stopBodyScroll(),hideNewsBar(),body.classList.toggle("stop")});let allProducts=document.querySelectorAll(".products-container .product"),leftProducts=document.querySelectorAll(".products-container .product.left"),medLeftProducts=document.querySelectorAll(".products-container .product.med-left"),medRightProducts=document.querySelectorAll(".products-container .product.med-right"),rightProducts=document.querySelectorAll(".products-container .product.right"),observer=new IntersectionObserver(e=>{e.forEach(e=>{e.target.classList.toggle("show",e.isIntersecting),e.isIntersecting&&observer.unobserve(e.target)})},{threshold:.5});leftProducts.forEach(e=>{observer.observe(e)}),medLeftProducts.forEach(e=>{observer.observe(e)}),medRightProducts.forEach(e=>{observer.observe(e)}),rightProducts.forEach(e=>{observer.observe(e)});let allButtons=document.querySelectorAll("button");function setBtnAttr(e){e.forEach(e=>{e.setAttribute("aria-label","button")})}document.addEventListener("DOMContentLoaded",setBtnAttr(allButtons));let allLinks=document.querySelectorAll("a");function setLinkAttr(e){e.forEach(e=>{e.setAttribute("aria-label","link")})}function lazyLoading(){Array.from(document.querySelectorAll("img")).forEach(e=>{e.setAttribute("loading","lazy"),e.alt="fitness clothes, gym clothes"});document.querySelector(".first-img img").removeAttribute("loading")}function imageAlt(){Array.from(document.querySelectorAll("img")).forEach(e=>{e.alt="fitness clothes, gym clothes"})}document.addEventListener("DOMContentLoaded",setLinkAttr(allLinks)),lazyLoading(),imageAlt();let news=document.querySelector(".news"),previousText=document.querySelector(".previous"),nextText=document.querySelector(".next"),textContainer=document.querySelector(".text-container"),textArray=Array.from(textContainer.querySelectorAll(".text p")),current=0,clickInterval;function addActive(){textArray.forEach((e,t)=>{e.classList.toggle("active",t===current)})}function nextClick(){current=(current+1)%textArray.length,addActive()}let summary=document.querySelector(".full-bag .cart-summary .check-out-help summary");function previousClick(){current=(current-1+textArray.length)%textArray.length,addActive()}function startInterval(){clickInterval=setInterval(previousClick,4e3)}function stopInterval(){clearInterval(clickInterval)}summary.addEventListener("click",()=>{summary.classList.toggle("show")}),nextText.addEventListener("click",nextClick),previousText.addEventListener("click",previousClick),addActive(),startInterval();let quickAddIcon=document.querySelectorAll(".product .quick-add-icon"),quickAdd=document.querySelectorAll(".quick-add");function removeClassName(e,t){e.forEach(e=>{e.classList.remove(`${t}`)})}quickAddIcon.forEach((e,t)=>{e.addEventListener("click",e=>{let r=quickAdd[t].classList.contains("show");e.target.closest(".quick-add-icon").classList.contains("quick-add-icon")&&(r?quickAdd[t].classList.remove("show"):quickAdd[t].classList.toggle("show"))})});let backToTop=document.querySelector(".back-to-top");backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});let section=Array.from(document.querySelectorAll(".section")),wrapMe=document.querySelectorAll(".wrap-me");function shuffleArray(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}function getArrayLength(e){let t=[];for(let r=0;r<e.length;r++)t.push(r);return t}let shuffledArray=shuffleArray(getArrayLength(section));document.addEventListener("DOMContentLoaded",function(){var e;let t,r,o;t=section[(e=shuffledArray)[0]],r=section[e[1]],o=section[e[2]],wrapMe[0].appendChild(t),wrapMe[1].appendChild(r),wrapMe[2].appendChild(o)});let h5Title=document.querySelectorAll(".nav-ul .nav-li h5"),navUl=document.querySelectorAll(".nav-ul .nav-li");h5Title.forEach((e,t)=>{e.addEventListener("click",()=>{navUl[t].classList.toggle("show")})});let selectRegionBtn=document.querySelectorAll(".select-region"),regionName=document.querySelectorAll(".region"),regionsImgs=document.querySelectorAll(".regions-flags"),firstRegionSelector=document.querySelector(".region-selection-container"),regionsOptions=document.getElementById("regions"),haveClass=firstRegionSelector.classList.contains("open"),submitButton=document.querySelector(".first-region-selection .submit"),closeRegionSelection=document.querySelector(".first-region-selection .close");const flags={ksa:"/regionsFlags/ksa.png",syria:"/regionsFlags/syria.png",iraq:"/regionsFlags/iraq.png",oman:"/regionsFlags/oman.png",jordan:"/regionsFlags/jordan.png",morocco:"/regionsFlags/morocco.png",eg:"/regionsFlags/egy.png"};function changeRegionInfo(){let e=regionsOptions.value;changeRegionName(e),changeRegionFlag(e),closeSelector()}function changeRegionFlag(e){regionsImgs.forEach(t=>{t.src=flags[e]})}function changeRegionName(e){regionName.forEach(t=>{t.textContent=e})}function closeSelector(){firstRegionSelector.classList.remove("open")}selectRegionBtn.forEach(e=>{e.addEventListener("click",e=>{firstRegionSelector.classList.toggle("open")})}),closeRegionSelection.addEventListener("click",()=>{closeSelector()}),submitButton.addEventListener("click",()=>{changeRegionInfo()});let showSideBar=document.querySelector(".show-side-bar"),sideBar=document.querySelector(".side-bar-container"),closeSideBar=document.querySelector(".close-side-bar");showSideBar.addEventListener("click",function(e){sideBar.classList.toggle("show"),document.body.classList.toggle("stop")}),closeSideBar.addEventListener("click",function(e){document.body.classList.remove("stop"),setTimeout(()=>{sideBar.classList.remove("show")},1e3),setTimeout(()=>{sideBar.classList.remove("animate")},1e3),sideBar.classList.toggle("animate")});let sideBarTitles=document.querySelectorAll(".side-bar-nav-ul .side-bar-nav-li .title"),sideBarNavUls=document.querySelectorAll(".side-bar-nav-ul .side-bar-nav-li ul"),titleChevrons=document.querySelectorAll(".side-bar-nav-ul .side-bar-nav-li .title-chevron");sideBarTitles.forEach((e,t)=>{e.addEventListener("click",()=>{sideBarNavUls[t].classList.toggle("show"),titleChevrons[t].classList.toggle("rotate"),e.classList.toggle("hide-border")})});let sideNav=document.querySelectorAll(".side-navbar div"),paginationNav=Array.from(sideNav),sectionContentContainer=document.querySelectorAll(".section-content-container"),sectionArray=Array.from(sectionContentContainer);function removeActiveNav(e){e.forEach(e=>{e.classList.remove("active")})}function addActiveNav(e){e.classList.add("active")}paginationNav.forEach(e=>{e.addEventListener("click",function(){removeActiveNav(paginationNav),addActiveNav(this);let e=this.dataset.section,t=document.querySelector(`.${e}`);removeActiveNav(sectionArray),addActiveNav(t)})});let allTheImg=document.querySelectorAll("img");allTheImg.forEach(e=>{e.addEventListener("error",()=>{e.src="IMGS/white.svg"})});let cartToggler=document.querySelector(".shopping-cart-toggler"),cartCloser=document.querySelector(".close-cart"),shoppingCart=document.querySelector(".shopping-cart-container"),totalPrice=document.querySelectorAll(".total-price"),mainCart=document.querySelector(".shopping-cart");cartToggler.addEventListener("click",()=>{shoppingCart.classList.toggle("show"),shoppingCart.classList.toggle("show-pc"),mainCart.classList.toggle("open"),document.body.classList.toggle("stop")}),cartCloser.addEventListener("click",()=>{shoppingCart.classList.toggle("animate"),document.body.classList.remove("stop"),setTimeout(()=>{mainCart.classList.remove("open"),shoppingCart.classList.remove("show"),shoppingCart.classList.remove("show-pc"),shoppingCart.classList.remove("animate")},700)});let theCards=document.querySelector(".user-items-cards"),products=document.querySelectorAll(".products-container .product"),productData=[];const permanentId=[];setProductsId(products);let basket=[];function initializeBasket(){basket=JSON.parse(window.localStorage.getItem("productData"))||[]}initializeBasket();let productDataArray=extractProductsData(products);function extractProductsData(e){if(0!==e.length)return Array.from(e).map(e=>({id:e.id,img:e.querySelector(".img img").src,name:e.querySelector("a h3").textContent,desc:e.querySelector("a .desc").textContent,color:e.querySelector("a .color").textContent,price:e.querySelector("a .price").textContent}))}function extractCartProductsData(e){let t=[];return e.forEach(e=>{t.push({id:e.id,quantity:parseInt(e.querySelector(".select-quantity label span").textContent),price:e.querySelector(".item-price").textContent})}),t}function addNewItemsToLocalStorage(){products.forEach(e=>{e.querySelector(".quick-add-icon").addEventListener("click",function(){if(0!==basket.length){let t=basket.find(t=>t.id===e.id)||[];0!==t.length?t.quantity++:basket.push({id:e.id,quantity:1})}else basket=[{id:e.id,quantity:1}];window.localStorage.setItem("productData",JSON.stringify(basket)),createCartCards(),calculateTotalPrice()})})}function calculateTotalPrice(){let e=document.querySelector(".items-numbers .items span"),t=document.querySelectorAll(".user-items-cards .user-item-card"),r=0;return 0!==t.length?e.textContent=t.length:(e.textContent=0,totalPrice.forEach(e=>{e.textContent=0})),basket.forEach(e=>{let t=productDataArray.find(t=>t.id===e.id);if(t){let o;r+=e.quantity*parseFloat(t.price.replace("$","")),totalPrice.forEach(e=>{e.textContent=`${r} $`})}}),r}function createCartCards(){theCards.innerHTML="";let e=JSON.parse(window.localStorage.getItem("productData"))||[];if(0!==e.length){let t=extractCartProductsData(document.querySelectorAll(".user-items-cards .user-item-card"));e.map(e=>{let{id:r,quantity:o}=e,a=productDataArray.find(e=>e.id===r);if(!t.some(e=>e.id===r))return theCards.innerHTML+=`
            <div class="user-item-card" id="${r}">

            <div class="item-img">
              <img src="${a.img}" alt=""">
            </div>

            <div class="item-info">

              <div class="item-title">
                <p class="item-name">${a.name}</p>
                <p class="item-desc">${a.desc}</p>
                <p class="item-color">${a.color}</p>
                <span class="item-price">${a.price}</span>
              </div>

              <div class="item-options">

                <div class="favorite-and-delete">
                  <div class="add-favorite">
                    <i class="fa-regular fa-heart"></i>
                  </div>

                  <div class="delete-item">
                    <i class="fa-regular fa-trash-can"></i>
                  </div>

                </div>

                <div class="select-quantity">
                  <label for="quantity-options">qty:<span class="span">${o}</span></label>
                  <select name="" id="quantity-options">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                  </select>
                </div>

              </div>

            </div>
            </div>

            `;document.querySelectorAll(`.user-items-cards #${a.id}`).forEach(e=>{e.querySelector(".span").textContent=o})})}}function setProductsId(e){e.forEach((e,t)=>{e.id=`product-${t}`})}function deleteItemFromCart(){let e=document.querySelectorAll(".user-items-cards .user-item-card");0!==e.length&&e.forEach(e=>{e.querySelector(".delete-item").addEventListener("click",()=>{let t=e.id;e.remove(),deleteItemFromLocalStorage(t),calculateTotalPrice()})})}function deleteItemFromLocalStorage(e){let t=JSON.parse(window.localStorage.getItem("productData"))||[],r=t.findIndex(t=>t.id===e);-1!==r&&(t.splice(r,1),window.localStorage.setItem("productData",JSON.stringify(t)))}addNewItemsToLocalStorage(),calculateTotalPrice(),document.addEventListener("DOMContentLoaded",createCartCards()),deleteItemFromCart();